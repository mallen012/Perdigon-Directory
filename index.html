
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Perdigon Directory</title>
  <style>
    body { font-family: Montserrat, Arial, sans-serif; background: #23272e; color: #f3f3fa; margin: 0; }
    .top-banner { display: flex; align-items: center; justify-content: space-between; background: #181a1f; padding: 8px 24px 8px 16px; min-height: 64px; }
    .banner-logo { height: 40px; margin-right: 18px; filter: drop-shadow(0 2px 6px #0005); background: transparent; border-radius: 8px; }
    .banner-weather { display: flex; gap: 24px; align-items: center; font-size: 1.09em; }
    .banner-weather-item { display: flex; align-items: center; gap: 6px; min-width: 140px; padding: 0 5px; background: rgba(36,36,42,0.12); border-radius: 8px; }
    .banner-weather-item img { width: 36px; height: 36px; margin-right: 3px; vertical-align: middle; }
    .banner-date { color: #ccd; font-size: 1em; letter-spacing: 0.01em; text-align: center; flex: 1; }
    .sms-invite-widget { display: flex; justify-content: flex-end; align-items: center; margin: 18px 34px 14px 0; }
    table { border-collapse: collapse; width: 100%; max-width: 900px; margin: 24px auto 0 auto; background: #292e36; border-radius: 16px; overflow: hidden; box-shadow: 0 4px 16px #1115; }
    th, td { padding: 12px 8px; border: 1px solid #444c; text-align: left; }
    th { font-weight: 700; background: #222844; color: #fff; font-size: 1.05em; letter-spacing: 0.02em; }
    td:last-child, th:last-child { width: 33%; min-width: 200px; }
    .dept-header-row td { background: linear-gradient(90deg, #31418f 80%, #222844 120%); color: #fff; font-size: 1.12em; font-weight: 700; letter-spacing: 0.03em; text-align: left; padding: 22px 14px 10px 14px; border-top: 3px solid #4f46e5; border-bottom: 2px solid #3c3c60; }
    tr.dept-space td { border: none !important; height: 6px; background: transparent; padding: 0; }
    a, a:visited { color: #4f46e5; text-decoration: underline; }
    .footer { text-align: center; font-size: small; color: #888; margin-top: 32px; padding-bottom: 24px; }
    /* SMS Invite styling */
    #smsForm { max-width:400px; margin:16px auto 14px auto; padding:20px; background:#292e36; border-radius:12px; box-shadow:0 2px 10px #0002; }
    #smsForm h3 { color:#4f46e5; margin-bottom:10px; }
    #smsForm label { color:#fff; }
    #smsForm input[type=tel] { width:100%; margin-bottom:10px; padding:8px; border-radius:6px; border:1px solid #888; font-size:1.1em; }
    #smsForm button { background:#4f46e5; color:#fff; padding:10px 20px; border:none; border-radius:8px; font-weight:600; font-size:1.1em; }
    #smsStatus { margin-top:12px; color:#b5d1ff; }
  </style>
</head>
<body>
  <div class="top-banner">
    <img class="banner-logo" src="https://mallen012.github.io/Perdigon-Directory/Blue%20Logo.png" alt="Perdigon Logo" onerror="this.style.display='none';">
    <div class="banner-date" id="banner-date"></div>
    <div class="banner-weather">
      <div class="banner-weather-item">
        <img src="https://openweathermap.org/img/wn/01d@2x.png" alt="Weather">
        <div>
          <strong>Lincoln, CA</strong><br>
          84&deg;F &nbsp; <span style="color:#b3b3cf">Clear</span><br>
          <span style="font-size:0.93em;color:#aaa;">H: 87&deg; / L: 79&deg;</span>
        </div>
      </div>
      <div class="banner-weather-item">
        <img src="https://openweathermap.org/img/wn/50d@2x.png" alt="Weather">
        <div>
          <strong>Mapleton, UT</strong><br>
          89&deg;F &nbsp; <span style="color:#b3b3cf">Haze</span><br>
          <span style="font-size:0.93em;color:#aaa;">H: 89&deg; / L: 87&deg;</span>
        </div>
      </div>
    </div>
  </div>
  <script>
    // Live date/time in banner
    function updateBannerDate() {
      var now = new Date();
      var dateStr = now.toLocaleString('en-US', {
        weekday: 'short', month: 'short', day: '2-digit', year: 'numeric',
        hour: '2-digit', minute: '2-digit'
      });
      document.getElementById('banner-date').textContent = dateStr;
    }
    updateBannerDate();
    setInterval(updateBannerDate, 15000);
  </script>

  <!-- SMS INVITE WIDGET -->
  <form id="smsForm">
    <h3>Invite a Guest to Call</h3>
    <label for="smsNumber">Mobile Number:</label><br>
    <input type="tel" id="smsNumber" name="number" required pattern="^\+1\d{10}$" placeholder="+15551234567"><br>
    <input type="hidden" name="sip" value="mike.allen@perdigon-group.com">
    <button type="submit">Send SMS Invite</button>
    <div id="smsStatus"></div>
  </form>
  <script>
    document.getElementById('smsForm').onsubmit = async function(e) {
      e.preventDefault();
      const smsStatus = document.getElementById('smsStatus');
      smsStatus.textContent = "Sending...";
      try {
        const res = await fetch('https://script.google.com/macros/s/AKfycbyg2C1DcsnyvQta3Sp6lHZwsU4gykwy6flSW_cz1MY80Kon4bvsk_uW4uZncbe1XKL5yw/exec', {
          method: "POST",
          headers: {"Content-Type":"application/json"},
          body: JSON.stringify({
            sip: document.querySelector('input[name="sip"]').value,
            number: document.getElementById('smsNumber').value
          })
        });
        const data = await res.json();
        if(data.success || data.status == "success" || res.status == 200) {
          smsStatus.textContent = "Invite sent!";
        } else if(data.error) {
          smsStatus.textContent = "Error: " + data.error;
        } else {
          smsStatus.textContent = "Request complete: " + JSON.stringify(data);
        }
      } catch (err) {
        smsStatus.textContent = "Error: " + err.message;
      }
    };
  </script>
  <table>
    <tr>
      <th>Name</th>
      <th>Department</th>
      <th>Number</th>
      <th>Notes</th>
    </tr>
<tr class="dept-header-row"><td colspan="4">Sales</td></tr><tr><td>Erik Peterson</td><td>Sales</td><td><a href="tel:801-903-3033">801-903-3033</a></td><td>Erik Cell</td></tr><tr><td>Erik PMR</td><td>Sales</td><td><a href="tel:erik.perdigon@webex.com">erik.perdigon@webex.com</a></td><td>Join from Device</td></tr><tr><td>Luke Allen</td><td>Sales</td><td><a href="tel:916-295-8312">916-295-8312</a></td><td>Luke A Cell</td></tr><tr><td>Mike Allen Cell</td><td>Sales</td><td><a href="tel:530-933-6253">530-933-6253</a></td><td>Mike Cell</td></tr><tr><td>Mike Allen Video</td><td>Sales</td><td><a href="tel:mike.allen@perdigon-group.com">mike.allen@perdigon-group.com</a></td><td>Mike Video</td></tr><tr><td>Mike PMR</td><td>Sales</td><td><a href="tel:mike.allen.perdigon@webex.com">mike.allen.perdigon@webex.com</a></td><td>Join from Device</td></tr><tr class="dept-space"><td colspan="4"></td></tr><tr class="dept-header-row"><td colspan="4">Service</td></tr><tr><td>Perdigon Service Dept</td><td>Service</td><td><a href="tel:435-777-7811">435-777-7811</a></td><td>Option 1 or ext 7812</td></tr><tr class="dept-space"><td colspan="4"></td></tr><tr class="dept-header-row"><td colspan="4">Vendor</td></tr><tr><td>ZoHo Support</td><td>Vendor</td><td><a href="tel:888-900-9646">888-900-9646</a></td><td>Option 2, Option 2</td></tr></table>
  <div class="footer">
    Generated by Perdigon ? &copy; Mike Allen
  </div>
</body>
</html>
